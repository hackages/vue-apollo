{"version":3,"sources":["webpack:///./src/components/views/Login.vue?dcd8","webpack:///src/components/views/Login.vue","webpack:///./src/components/views/Login.vue?891b","webpack:///./src/components/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","_s","login","directives","name","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","username","password","click","confirm","staticRenderFns","defaults","Loginvue_type_script_lang_js","data","Object","objectSpread","$route","params","methods","_confirm","asyncToGenerator","regeneratorRuntime","mark","_callee","res","_ref","_ref$data$signInUser","token","user","wrap","_context","prev","next","console","log","$apollo","mutate","mutation","queries","variables","sent","t0","warn","abrupt","signInUser","saveUserData","t1","stop","apply","arguments","localStorage","setItem","$store","commit","$router","push","views_Loginvue_type_script_lang_js","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/2.93220aa0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"\\n  coucou\\n  \"),_c('h4',{staticClass:\"mv3\"},[_vm._v(_vm._s(_vm.login ? 'Login' : 'Sign Up'))]),_c('div',{staticClass:\"flex flex-column\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Your username\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"placeholder\":\"Password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})]),_c('div',{staticClass:\"flex mt3\"},[_c('button',{staticClass:\"pointer mr2 button\",on:{\"click\":function($event){_vm.confirm()}}},[_vm._v(\"\\n      \"+_vm._s(_vm.login ? 'login' : 'create account')+\"\\n    \")]),_c('button',{staticClass:\"pointer button\",on:{\"click\":function($event){_vm.login = !_vm.login}}},[_vm._v(\"\\n      \"+_vm._s(_vm.login ? 'need to create an account?' : 'already have an account?')+\"\\n    \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    coucou\n    <h4 class='mv3'>{{login ? 'Login' : 'Sign Up'}}</h4>\n    <div class='flex flex-column'>\n      <input\n        v-model=\"username\"\n        type=\"text\"\n        placeholder=\"Your username\">\n      <input\n        v-model=\"password\"\n        type=\"password\"\n        placeholder=\"Password\">\n    </div>\n    <div class='flex mt3'>\n      <button\n        class='pointer mr2 button'\n        @click=\"confirm()\">\n        {{login ? 'login' : 'create account'}}\n      </button>\n      <button\n        class='pointer button'\n        @click=\"login = !login\">\n        {{login ? 'need to create an account?' : 'already have an account?'}}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { signInUser, createUser } from '../../database/queries.js'\n\nconst defaults = {\n  username: '',\n  password: '',\n}\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      ...defaults,\n      login: this.$route.params.login || false,\n    }\n  },\n  methods: {\n    async confirm() {\n      if (!this.login) {\n        console.log('will create user', this.username)\n        try {\n          const res = await this.$apollo.mutate({\n            mutation: createUser,\n            variables: {\n              username: this.username,\n              password: this.password,\n            },\n          })\n          console.log(res)\n        } catch (err) {\n          console.warn(err)\n          return -1\n        }\n      }\n      try {\n        const {\n          data: { signInUser: { token, user } },\n        } = await this.$apollo.mutate({\n          mutation: signInUser,\n          variables: {\n            username: this.username,\n            password: this.password,\n          },\n        })\n        console.log(user)\n        this.saveUserData(user, token)\n      } catch (err) {\n        console.warn(err)\n      }\n    },\n    saveUserData(user, token) {\n      console.log('user', user)\n      localStorage.setItem('token', token)\n      this.$store.commit('setUserInfo', user)\n      this.$router.push('/feed')\n    },\n  },\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=069836d1\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}